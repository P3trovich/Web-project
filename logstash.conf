input {
  # Для JSON логов (уже есть)
  file {
    path => "/logs/*.json.log"
    codec => json { charset => "UTF-8" }
    tags => ["json"]
  }
  
  # Для обычных текстовых логов
  file {
    path => "/logs/*.log"
    exclude => "*.json.log"  # Исключаем JSON файлы
    codec => plain { charset => "UTF-8" }
    tags => ["text"]
  }
}

filter {
  # Для JSON логов добавляем поля
  if "json" in [tags] {
    date {
      match => ["timestamp", "ISO8601"]
      target => "@timestamp"
    }
  }
}

output {
  elasticsearch {
    hosts => ["elasticsearch:9200"]
    index => "logs-%{+YYYY.MM.dd}"
  }
}